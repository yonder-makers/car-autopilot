(this["webpackJsonpcar-autopilot"]=this["webpackJsonpcar-autopilot"]||[]).push([[0],{168:function(e,t,n){},169:function(e,t,n){},213:function(e,t){},215:function(e,t){},256:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(30),a=n.n(c),s=(n(168),n(64)),o=n(36),u=(n(169),n(27)),j=n(266),l=n(260),d=n(263),b=n(261);function h(e,t,n){Object(r.useEffect)((function(){var t=localStorage.getItem(e);t&&n(JSON.parse(t))}),[e]),Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(t))}),[e,t])}var O,f=n(152);function m(e){return e>50?1:e<-50?0:(e+50)/100}function x(e,t,n){var i=Object(r.useRef)([]),c=Object(r.useRef)(new f.NeuralNetwork),a=Object(r.useRef)([]),s=Object(r.useRef)({error:0,throttleToBeApplied:0});return Object(r.useEffect)((function(){var r=s.current,o=t-e.speed,u={input:[m(r.error),r.throttleToBeApplied/100],output:[m(o)]};n!==O.explore&&n!==O.continuous||(i.current.push(u),c.current.train(i.current,{errorThresh:.005}));var j=function(e,t,n){for(var r=1e5,i=0,c=[],a=0;a<=100;a++){var s=[m(t),a/100],o=e.run(s),u=Math.abs(o[0]-.5);u<r&&(r=u,i=a),c.push(u)}return n&&(i=100*Math.random()),{throttle:i,errors:c}}(c.current,o,n===O.explore),l=j.throttle,d=j.errors;a.current=d,s.current={error:o,throttleToBeApplied:l},e.setThrottle(l)}),[e.simTime]),{errors:a.current,dataPoints:i.current.length}}!function(e){e[e.explore=1]="explore",e[e.continuous=2]="continuous",e[e.off=3]="off"}(O||(O={}));var p=n(86),v=n.n(p),g=n(15),w=300;var T={throttle:0,angle:0,speed:0,simTime:0,wind:20,horsePower:200,isPaused:!1};function C(){var e=Object(r.useState)(T),t=Object(u.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)((function(){if(!n.isPaused){var e=setInterval((function(){i((function(e){var t,n,r,i=(t=e.horsePower,n=e.speed,r=e.throttle,(300-n)*r/(300/t*600)/(1e3/w)-.6-function(e,t){var n=e+t;return n*n/4e3/(1e3/w)}(e.speed,e.wind)-e.angle/(1e3/w));return Object(g.a)(Object(g.a)({},e),{},{simTime:e.simTime+1,speed:Math.max(0,e.speed+i)})}))}),w);return function(){clearInterval(e)}}}),[n.isPaused]),Object(g.a)(Object(g.a)({},n),{},{setThrottle:function(e){i((function(t){return Object(g.a)(Object(g.a)({},t),{},{throttle:e})}))},setWind:function(e){i((function(t){return Object(g.a)(Object(g.a)({},t),{},{wind:e})}))},setAngle:function(e){i((function(t){return Object(g.a)(Object(g.a)({},t),{},{angle:e})}))},setHorsePower:function(e){i((function(t){return Object(g.a)(Object(g.a)({},t),{},{horsePower:e})}))},setIsPaused:function(e){i((function(t){return Object(g.a)(Object(g.a)({},t),{},{isPaused:e})}))}})}var y=n(4);function S(e){var t=Object(r.useMemo)((function(){return{chart:{height:350,type:"line",animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:280}},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"AI diagnosis",align:"left"},markers:{size:0},xaxis:{type:"numeric"},yaxis:{max:.5,min:0,labels:{formatter:function(e){return(Math.round(10*e)/10).toString()}}},legend:{show:!1}}}),[]),n=[{name:"series-1",data:e.expectedErrors}];return Object(y.jsx)(v.a,{options:t,series:n,type:"line",height:350})}var P=n(262);function M(e){var t=e.targetSpeed,n=e.changeSpeed;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{children:["Target speed: ",t]}),Object(y.jsxs)(j.b,{wrap:!0,children:[Object(y.jsx)(b.a,{min:0,max:200,onChange:n,value:t,style:{width:200}}),Object(y.jsx)(P.a,{onClick:function(){return n(50)},children:"50"}),Object(y.jsx)(P.a,{onClick:function(){return n(70)},children:"70"}),Object(y.jsx)(P.a,{onClick:function(){return n(90)},children:"90"}),Object(y.jsx)(P.a,{onClick:function(){return n(130)},children:"130"})]})]})}function A(e){var t=e.simulator,n=Object(r.useState)(70),i=Object(u.a)(n,2),c=i[0],a=i[1],s=Object(r.useState)(O.explore),o=Object(u.a)(s,2),b=o[0],h=o[1],f=x(t,c,b),m=f.errors,p=f.dataPoints;return Object(y.jsxs)(j.b,{direction:"vertical",style:{width:"100%"},children:[Object(y.jsxs)(l.a,{title:"Autopilot",children:[Object(y.jsx)(M,{changeSpeed:a,targetSpeed:c}),Object(y.jsxs)(d.a.Group,{onChange:function(e){return h(e.target.value)},value:b,children:[Object(y.jsx)(d.a,{value:O.explore,children:"Explore"}),Object(y.jsx)(d.a,{value:O.continuous,children:"Continuous learning"}),Object(y.jsx)(d.a,{value:O.off,children:"Learning off"})]})]}),Object(y.jsxs)(l.a,{children:["Data points: ",p]}),Object(y.jsx)(l.a,{children:Object(y.jsx)(S,{expectedErrors:m})})]})}function E(e){var t=e.simulator,n=t.speed,i=Object(r.useState)(Math.floor(n)),c=Object(u.a)(i,2),a=c[0],s=c[1];return function(e,t){Object(r.useEffect)((function(){e.speed>t?e.setThrottle(0):e.speed<t&&e.setThrottle(100)}),[e.simTime])}(t,a),Object(y.jsx)(l.a,{title:"Dumb Autopilot",children:Object(y.jsx)(M,{targetSpeed:a,changeSpeed:s})})}var I=n(265);function k(e){var t=e.autopilot,n=t.config;return h("pid-controls",n,t.setCoeficients),Object(y.jsxs)(l.a,{title:"PID Coeficients",children:[Object(y.jsxs)("div",{children:["p: ",n.p]}),Object(y.jsx)(b.a,{min:0,max:40,step:.01,onChange:function(e){return t.setCoeficients(Object(g.a)(Object(g.a)({},n),{},{p:e}))},value:n.p,style:{width:400,maxWidth:"100%"}}),Object(y.jsxs)("div",{children:["i: ",n.i]}),Object(y.jsx)(b.a,{min:0,max:10,step:.01,onChange:function(e){return t.setCoeficients(Object(g.a)(Object(g.a)({},n),{},{i:e}))},value:n.i,style:{width:400,maxWidth:"100%"}}),Object(y.jsxs)("div",{children:["d: ",n.d]}),Object(y.jsx)(b.a,{min:0,max:10,step:.01,onChange:function(e){return t.setCoeficients(Object(g.a)(Object(g.a)({},n),{},{d:e}))},value:n.d,style:{width:400,maxWidth:"100%"}})]})}function D(e){var t=e.autopilot;return Object(y.jsxs)(l.a,{title:"PID Diag",children:[Object(y.jsxs)("div",{children:[" Error: ",t.error]}),Object(y.jsxs)("div",{children:[" Integral: ",t.integral]}),Object(y.jsxs)("div",{children:[" Derivative: ",t.derivative]}),Object(y.jsxs)("div",{children:[" Output: ",t.output]})]})}function W(e){var t=e.simulator,n=t.speed,i=t.simTime,c=Object(r.useState)(Math.floor(n)),a=Object(u.a)(c,2),s=a[0],o=a[1],d=function(e,t){var n=Object(r.useState)({error:0,integral:0,derivative:0,output:0,config:{d:1,i:1,p:1}}),i=Object(u.a)(n,2),c=i[0],a=i[1];Object(r.useEffect)((function(){var n=c.config,r=t-e.speed,i=c.integral+.3*r,s=(r-c.error)/.3,o=n.p*r+n.i*i+n.d*s;a((function(e){return Object(g.a)(Object(g.a)({},e),{},{error:r,integral:i,derivative:s,output:o})}))}),[e.simTime]),Object(r.useEffect)((function(){e.setThrottle(Math.min(100,Math.max(0,c.output)))}),[c.output]);var s=Object(r.useCallback)((function(e){a((function(t){return Object(g.a)(Object(g.a)({},t),{},{config:e})}))}),[a]);return Object(g.a)(Object(g.a)({},c),{},{setCoeficients:s})}(t,s),b=function(e,t,n){var i=Object(r.useState)({startTime:new Date,hitCount:0}),c=Object(u.a)(i,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){s((function(e){return Object(g.a)(Object(g.a)({},e),{},{startTime:new Date,endTime:void 0,hitCount:0})}))}),[e]),Object(r.useEffect)((function(){Math.abs(e-t)<.5?s((function(e){var t=Object(g.a)(Object(g.a)({},e),{},{hitCount:e.hitCount+1});return 1===t.hitCount&&(t.endTime=new Date),t})):a.hitCount>0&&s((function(e){return Object(g.a)(Object(g.a)({},e),{},{endTime:void 0,hitCount:0})}))}),[n]),{adjustingTime:Object(r.useMemo)((function(){return a.endTime?Object(I.a)(a.endTime,a.startTime):Object(I.a)(new Date,a.startTime)}),[n]),hitCount:a.hitCount}}(s,n,i),h=b.adjustingTime,O=b.hitCount;return Object(y.jsxs)(j.b,{direction:"vertical",style:{width:"100%"},children:[Object(y.jsxs)(l.a,{title:"Autopilot",children:[Object(y.jsx)(M,{changeSpeed:o,targetSpeed:s}),Object(y.jsxs)("div",{children:["Adjusting time: ",h,"seconds ",O&&Object(y.jsxs)("span",{children:["(hit: ",O,")"]})]})]}),Object(y.jsx)(D,{autopilot:d}),Object(y.jsx)(k,{autopilot:d})]})}function N(e){var t=e.simulator,n=t.throttle,i=t.setThrottle,c=Object(r.useState)(1),a=Object(u.a)(c,2),s=a[0],o=a[1];return h("control-mode",s,o),Object(y.jsxs)(j.b,{direction:"vertical",style:{width:"100%"},children:[Object(y.jsxs)(l.a,{children:["Mode:",Object(y.jsxs)(d.a.Group,{onChange:function(e){return o(e.target.value)},value:s,children:[Object(y.jsx)(d.a,{value:1,children:"Manual"}),Object(y.jsx)(d.a,{value:2,children:"Dumb Autopilot"}),Object(y.jsx)(d.a,{value:3,children:"Autopilot"}),Object(y.jsx)(d.a,{value:4,children:"AI pilot"})]}),Object(y.jsxs)(j.b,{style:{width:"100%"},children:["Throttle:",Object(y.jsx)(b.a,{disabled:1!==s,min:1,max:100,onChange:i,value:n,style:{width:200}})]})]}),2===s&&Object(y.jsx)(E,{simulator:t}),3===s&&Object(y.jsx)(W,{simulator:t}),4===s&&Object(y.jsx)(A,{simulator:t})]})}function z(e){var t=e.simulator,n=t.wind,r=t.setWind,i=t.angle,c=t.setAngle,a=t.horsePower,s=t.setHorsePower;return h("wind",n,r),h("angle",i,c),h("horsePower",a,s),Object(y.jsxs)(j.b,{direction:"vertical",style:{width:"100%"},children:[Object(y.jsx)(l.a,{children:Object(y.jsx)(P.a,{onClick:function(){return t.setIsPaused(!t.isPaused)},style:{width:"100%"},children:t.isPaused?"Continue":"Pause"})}),Object(y.jsxs)(l.a,{children:["Horse power: ",a,Object(y.jsx)(b.a,{min:0,max:400,onChange:s,value:a,style:{width:"100%"}})]}),Object(y.jsxs)(l.a,{children:["Wind speed: ",n,Object(y.jsx)(b.a,{min:0,max:150,onChange:r,value:n,style:{width:"100%"}})]}),Object(y.jsxs)(l.a,{children:["Incline: ",i,Object(y.jsx)(b.a,{min:-25,max:25,onChange:c,value:i,style:{width:"100%"}})]})]})}var B=n(161);function F(e){var t=function(e,t){var n=Object(r.useState)([t]),i=Object(u.a)(n,2),c=i[0],a=i[1];return Object(r.useEffect)((function(){a((function(e){return[].concat(Object(B.a)(e),[Math.floor(t)])}))}),[e]),{data:c}}(e.simTime,e.currentValue).data,n=Object(r.useMemo)((function(){return{chart:{height:350,type:"line",animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:280}},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:e.title,align:"left"},markers:{size:0},xaxis:{type:"numeric",range:100},yaxis:{max:e.max,min:e.min},legend:{show:!1}}}),[e.title,e.min,e.max]),i=[{name:"series-1",data:t}];return Object(y.jsx)(v.a,{options:n,series:i,type:"line",height:350})}var L=Object(r.memo)(F,(function(e,t){return e.simTime===t.simTime}));function H(e){var t=e.simulator,n=t.speed,r=t.simTime,i=t.throttle;return Object(y.jsxs)(j.b,{direction:"vertical",style:{width:"100%"},children:[Object(y.jsx)(l.a,{children:Object(y.jsx)(L,{title:"Speed: "+Math.round(n),simTime:r,currentValue:n,min:0,max:230})}),Object(y.jsx)(l.a,{children:Object(y.jsx)(L,{title:"Throttle: "+Math.round(i),simTime:r,currentValue:i,min:0,max:100})})]})}function J(){var e=C();return Object(y.jsxs)(s.a,{gutter:12,children:[Object(y.jsx)(o.a,{span:9,children:Object(y.jsx)(N,{simulator:e})}),Object(y.jsx)(o.a,{span:3,children:Object(y.jsx)(z,{simulator:e})}),Object(y.jsx)(o.a,{span:12,children:Object(y.jsx)(H,{simulator:e})})]})}var R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,267)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),c(e),a(e)}))},V=(n(255),n(259)),G=n(264);function K(e){return Object(y.jsxs)(V.a,{className:"layout",children:[Object(y.jsx)(V.a.Header,{children:Object(y.jsx)(G.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:Object(y.jsx)(G.a.Item,{children:"Welcome"},"1")})}),Object(y.jsx)(V.a.Content,{style:{padding:"12px"},children:Object(y.jsx)("div",{className:"site-layout-content",children:e.children})})]})}a.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(K,{children:Object(y.jsx)(J,{})})}),document.getElementById("root")),R()}},[[256,1,2]]]);
//# sourceMappingURL=main.748a4eb5.chunk.js.map